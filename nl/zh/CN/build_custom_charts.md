---

copyright:
  years: 2018, 2019
lastupdated: "2018-11-22"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:pre: .pre}
{:codeblock: .codeblock}
{:screen: .screen}
{:note: .note}
{:important: .important}
{:deprecated: .deprecated}

# 构建定制图表
{: #build_custom_charts}

通过 Mobile Analytics 控制台中的“定制图表”视图，您可以围绕所捕获和存储的分析数据灵活地构建自己的可视化。这将有助于获取现成可用内容之外的更深入洞察，甚至无缝扩展至围绕定制数据制定的业务分析。

在此视图中，您可以选择任何一个支持的分析数据集，然后选择其中一个支持的图表类型以绘制数据集。您甚至可以通过定义要对所绘制的数据应用的过滤器来进一步修剪可视化。  

支持的数据集：
 * 应用程序日志
 * 应用程序会话
 * 定制数据
 * 网络事务
 
支持的图表类型：
 * 条形图
 * 流程图
 * 折线图
 * 度量组 
 * 饼图
 * 表
 
数据集选择、要绘制的图表类型、图表特征的定义以及要应用的数据过滤器可全部融汇到“定制图表”定义中，并进行保存。您可以根据需要创建任意多个“定制图表”定义并保存。保存的“定制图表”将与绘制的相关分析数据一起显示在“定制图表”视图上。 

## 创建定制图表
{: #creating_custom_chart}

使用以下步骤创建定制图表：

1.  在 Mobile Analytics 仪表板的**定制图表**选项卡中单击**创建图表**按钮。
2.  在**常规设置**选项卡中，选择**图表标题**、**事件类型**和**图表类型**。
3.  在选择*事件类型*和*图表类型*时，将显示**图表定义**选项卡。使用*图表定义*选项卡为先前选择的指定图表类型定义图表。定义图表后，可以设置图表过滤器和图表属性。
4.  **图表过滤器**用于微调定制图表。可以为图表定义多个过滤器。例如，定义图表来可视化平均应用程序会话持续时间之后，如果希望仅针对特定应用程序可视化此图表，那么您可以按如下所示创建过滤器：
    * 针对**属性**选择**应用程序名称**。
    * 针对**运算符**选择**等于**。
    * 针对**值**选择应用程序的名称。
    * 单击**添加过滤器**。这样会将应用程序名称过滤器添加到您的图表的过滤器表中。
5.  针对**表**、**条形图**和**折线图**图表类型可提供图表属性。图表属性的目标是增强数据演示的方式，使可视化更有效。如果创建了**表**图表，那么将设置图表属性来定义表页面大小、要对其排序的字段以及字段的排序顺序。如果创建了**条形图**或**折线图**图表，那么将设置图表属性来标记阈值行，从而为监视图表的任何人添加参照标准。

## 从定制数据日志获取定制洞察
{: #creating_custom_chart_for_client_logs}    

如果您希望获取更深入的定制洞察（例如，整个应用程序中的用户跟踪），那么首先您应捕获相关用户跟踪信息（例如，选择的页面、选择的选项或单击的按钮）作为定制数据，并进行记录。请参阅[检测应用程序](/docs/services/mobilefoundation?topic=mobilefoundation-instrument_your_app#instrument_your_app)上有关如何记录定制数据的主题。

接下来，创建“事件类型”为“定制数据”的定制图表定义，然后选择“图表类型”。在您继续定义**图表属性**或**图表过滤器**时，您将发现“定制数据”类型和值在下拉框中显示。根据您所需的洞察类型，做出相关选择。  

定制洞察的深度和有用性完全取决于您在应用程序中定义并捕获定制数据的有效程度或相关程度。
{: note}

## 图表类型
{: #types_of_charts}

### 条形图
{:  #bar_graph}

条形图允许在 X 轴上可视化数字数据。定义条形图时，必须先选择 X 轴的值。可从以下可能的值中进行选择。

* **时间线** - 如果要查看数据的趋势（例如，一段时间内的平均应用程序会话持续时间），请针对 X 轴选择*时间线*。
* **属性** - 如果要查看特定属性的计数明细，请选择“属性”。如果针对 X 轴选择“属性”，那么将针对 Y 轴隐式选择“总计”。例如，针对 X 轴选择*属性*，并针对*属性*选择*应用程序名称*，以查看指定事件类型的计数（按应用程序名称细分）。

为 X 轴定义值之后，可以为 Y 轴定义值。如果针对 X 轴选择*时间线*，那么可以针对 Y 轴选择以下可能的值。

* **平均值** - 计算提供的事件类型中某个数字属性的平均值。
* **总计** - 计算提供的事件类型中某个属性的总数。
* **唯一** - 计算提供的事件类型中某个属性的唯一计数。定义图表轴后，必须为“属性”选择值。

### 折线图
{:  #line_graph}

折线图允许可视化某个度量值在一段时间内的变化情况。当您要可视化一段时间内的数据趋势时，此类型的图表很有价值。创建折线图时要定义的第一个值为**度量**，可能的值如下：

* **平均值** - 计算提供的事件类型中某个数字属性的平均值。
* **总计** - 计算提供的事件类型中某个属性的总数。
* **唯一** - 计算提供的事件类型中某个属性的唯一计数。定义度量之后，必须为**属性**选择值。

### 流程图
{:  #flow_chart}

流程图允许可视化从一个属性到另一个属性的流程明细。对于流程图，必须设置以下属性。

* **源** - 图中源节点的值。
* **目标** - 图中目标节点的值。
* **属性** - 来自源节点或目标节点的属性值。使用流程图，您可以查看流向目标的各种源（或反方向）的密度明细。例如，如果要查看某个应用程序的日志严重性的明细，可以定义以下值。

* 针对**源**选择*应用程序名称*。
* 针对**目标**选择*日志级别*。
* 针对**属性**选择应用程序名称。

### 度量组
{:  #metric_group}

度量组可用于可视化作为平均值、总数或唯一计数来度量的单个度量值。要定义度量组，必须为**度量**定义以下某一个可能的值。

* **平均值** - 计算提供的事件类型中某个数字属性的平均值。
* **总计** - 计算提供的事件类型中某个属性的总数。
* **唯一** - 计算提供的事件类型中某个属性的唯一计数。定义度量之后，必须为*属性*选择值。此度量显示在度量组中。

### 饼图
{:  #pie_chart}

饼图可用于可视化特定属性的值的计数明细。例如，如果要查看崩溃明细，请定义以下值。

* 针对**事件类型**选择*应用程序会话*。
* 针对**图表类型**选择*饼图*。
* 针对**属性**选择*结束方式*。生成的饼图将显示由用户结束的应用程序会话（而非由于崩溃而结束的应用程序会话）的明细。

### 表
{:  #table}

如果要查看原始数据，该表很有用。构建表很简单，只需为要查看的原始数据添加列即可。由于特定事件类型并不一定需要所有属性，因此您的表中可能出现空值。如果希望表中不出现这些行，请在**图表过滤器**选项卡中针对特定属性添加 *Exists* 过滤器

